{% extends "base-ancient.html" %}

{% block title %}ç¼–è¾‘å°è¯´ - æ‚¦è¯»åŠ{% endblock %}

{% block content %}
<h1 class="page-title" style="text-align: left;">âœï¸ ç¼–è¾‘å°è¯´ï¼š{{ novel.title }}</h1>

<div class="card" style="margin-bottom: 2rem;">
    <form method="POST">
        <div class="form-group">
            <label for="title" style="color: #5a4a3a; font-weight: 600; margin-bottom: 0.5rem; display: block;">å°è¯´æ ‡é¢˜ *</label>
            <input type="text" id="title" name="title" class="form-control" value="{{ novel.title }}" required style="border: 2px solid #f0e6d6; border-radius: 8px; padding: 0.85rem;">
        </div>
        
        <div class="form-group">
            <label for="category" style="color: #5a4a3a; font-weight: 600; margin-bottom: 0.5rem; display: block;">åˆ†ç±» *</label>
            <select id="category" name="category" class="form-control" required style="border: 2px solid #f0e6d6; border-radius: 8px; padding: 0.85rem;">
                {% for cat in categories %}
                <option value="{{ cat }}" {% if cat == novel.category %}selected{% endif %}>{{ cat }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="tags" style="color: #5a4a3a; font-weight: 600; margin-bottom: 0.5rem; display: block;">æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
            <input type="text" id="tags" name="tags" class="form-control" value="{{ novel.tags_str }}" style="border: 2px solid #f0e6d6; border-radius: 8px; padding: 0.85rem;">
        </div>
        
        <div class="form-group">
            <label for="intro" style="color: #5a4a3a; font-weight: 600; margin-bottom: 0.5rem; display: block;">ç®€ä»‹ *</label>
            <textarea id="intro" name="intro" class="form-control" required style="border: 2px solid #f0e6d6; border-radius: 8px; padding: 0.85rem; min-height: 150px;">{{ novel.intro }}</textarea>
        </div>
        
        <div class="form-group">
            <label for="price" style="color: #5a4a3a; font-weight: 600; margin-bottom: 0.5rem; display: block;">å®šä»·ï¼ˆå…ƒï¼‰</label>
            <input type="number" id="price" name="price" class="form-control" value="{{ novel.price }}" step="0.01" min="0" style="border: 2px solid #f0e6d6; border-radius: 8px; padding: 0.85rem;">
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜ä¿®æ”¹</button>
            <a href="{{ url_for('creator_chapters', novel_id=novel._id) }}" class="btn btn-success">ğŸ“š ç®¡ç†ç« èŠ‚</a>
            <a href="{{ url_for('creator_novels') }}" class="btn btn-secondary">è¿”å›</a>
        </div>
    </form>
</div>

{% if novel.status == 'rejected' and novel.review %}
<div class="card" style="border: 2px solid #e74c3c; background: #fff5f5;">
    <div class="card-header" style="color: #e74c3c; background: transparent; border-bottom: 1px solid #e74c3c;">
        âŒ é©³å›åŸå› 
    </div>
    <p style="color: #c0392b; line-height: 1.8;">{{ novel.review.opinion }}</p>
    <p style="color: #8b7355; font-size: 0.9rem;">
        ğŸ• å®¡æ ¸æ—¶é—´ï¼š{{ novel.review.time.strftime('%Y-%m-%d %H:%M') if novel.review.time else '-' }}
    </p>
</div>
{% endif %}
{% endblock %}

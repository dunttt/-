{% extends "base-ancient.html" %}

{% block title %}ä¸ºä½ æ¨è - æ‚¦è¯»åŠ{% endblock %}

{% block content %}
<h1 class="page-title" style="text-align: left;">ä¸ºä½ æ¨è</h1>

<!-- å…´è¶£æ ‡ç­¾å±•ç¤º -->
{% if interested_tags or interested_categories %}
<div class="card">
    <div class="card-header">ğŸ“Œ ä½ çš„å…´è¶£åå¥½</div>
    <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 0.5rem;">
        {% for category in interested_categories %}
        <span class="badge badge-primary">ğŸ“š {{ category }}</span>
        {% endfor %}
        {% for tag in interested_tags %}
        <span class="badge badge-warning">ğŸ·ï¸ {{ tag }}</span>
        {% endfor %}
    </div>
    <p style="color: #8b7355; font-size: 0.9rem; margin-top: 0.5rem;">
        åŸºäºä½ çš„é˜…è¯»å’Œè´­ä¹°å†å²ï¼Œæˆ‘ä»¬ä¸ºä½ æ¨èä»¥ä¸‹å°è¯´
    </p>
</div>
{% endif %}

<!-- çŒœä½ å–œæ¬¢ -->
<div style="margin-top: 2rem;">
    <h2 style="font-size: 1.5rem; font-weight: 600; color: #5a4a3a; margin-bottom: 0.5rem; padding-left: 1rem; border-left: 4px solid #c8553d;">
        ğŸ¯ çŒœä½ å–œæ¬¢
    </h2>
    <p style="color: #8b7355; font-size: 0.95rem; margin-bottom: 1.5rem; padding-left: 1rem;">
        ğŸ’¡ æ ¹æ®ä½ çš„é˜…è¯»åå¥½å’Œå…´è¶£æ ‡ç­¾ï¼Œä¸ºä½ ç²¾é€‰çš„å°è¯´
    </p>
    
    {% if content_based %}
    <div class="novels-grid">
        {% for novel in content_based %}
        <div class="novel-card" onclick="window.location.href='{{ url_for('reader_novel_detail', novel_id=novel._id) }}'">
            <div class="novel-cover" style="background: linear-gradient(135deg, 
                {% if loop.index0 % 6 == 0 %}#c8553d 0%, #a0442f 100%
                {% elif loop.index0 % 6 == 1 %}#8b7355 0%, #6d5c47 100%
                {% elif loop.index0 % 6 == 2 %}#5f9e6e 0%, #4a7c58 100%
                {% elif loop.index0 % 6 == 3 %}#d4a259 0%, #b8894a 100%
                {% elif loop.index0 % 6 == 4 %}#7a92a3 0%, #5d7386 100%
                {% else %}#9b6b6f 0%, #7d5659 100%{% endif %});">
                {{ novel.title[:2] }}
            </div>
            <div class="novel-info">
                <div class="novel-title">{{ novel.title }}</div>
                <div class="novel-meta">
                    <span class="badge badge-primary">{{ novel.category }}</span>
                    <span>âœï¸ {{ novel.author_name }}</span>
                </div>
                <div class="novel-meta">
                    <span>ğŸ“– {{ novel.chapters|length }} ç« </span>
                    <span>ğŸ‘ï¸ {{ novel.readCount }}</span>
                    {% if novel.price > 0 %}
                    <span style="color: #c8553d; font-weight: bold;">Â¥{{ '%.2f'|format(novel.price) }}</span>
                    {% else %}
                    <span class="badge badge-success">å…è´¹</span>
                    {% endif %}
                </div>
                <div class="novel-intro">{{ novel.intro }}</div>
                <button class="btn btn-primary" style="width: 100%;">æŸ¥çœ‹è¯¦æƒ…</button>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="icon">ğŸ“–</div>
        <h3>è¿˜æ²¡æœ‰è¶³å¤Ÿçš„æ•°æ®</h3>
        <p>å¤šé˜…è¯»å‡ æœ¬å°è¯´ï¼Œæˆ‘ä»¬å°±èƒ½ä¸ºä½ æ¨èæ›´å¤šå¥½ä¹¦å•¦ï¼</p>
        <a href="{{ url_for('reader_novels') }}" class="btn btn-primary">å»å°è¯´å¹¿åœºé€›é€›</a>
    </div>
    {% endif %}
</div>

<!-- çƒ­é—¨æ¨è -->
<div style="margin-top: 3rem;">
    <h2 style="font-size: 1.5rem; font-weight: 600; color: #5a4a3a; margin-bottom: 0.5rem; padding-left: 1rem; border-left: 4px solid #d4a259;">
        ğŸ”¥ çƒ­é—¨æ¨è
    </h2>
    <p style="color: #8b7355; font-size: 0.95rem; margin-bottom: 1.5rem; padding-left: 1rem;">
        ğŸ”¥ å¹³å°æœ€å—æ¬¢è¿çš„å°è¯´ï¼Œäººæ°”çˆ†æ£š
    </p>
    
    <div class="novels-grid">
        {% for novel in hot_recommendations %}
        <div class="novel-card" onclick="window.location.href='{{ url_for('reader_novel_detail', novel_id=novel._id) }}'">
            <div class="novel-cover" style="background: linear-gradient(135deg, 
                {% if loop.index0 % 6 == 0 %}#d4a259 0%, #b8894a 100%
                {% elif loop.index0 % 6 == 1 %}#c8553d 0%, #a0442f 100%
                {% elif loop.index0 % 6 == 2 %}#5f9e6e 0%, #4a7c58 100%
                {% elif loop.index0 % 6 == 3 %}#9b6b6f 0%, #7d5659 100%
                {% elif loop.index0 % 6 == 4 %}#7a92a3 0%, #5d7386 100%
                {% else %}#8b7355 0%, #6d5c47 100%{% endif %});">
                {{ novel.title[:2] }}
            </div>
            <div class="novel-info">
                <div class="novel-title">{{ novel.title }}</div>
                <div class="novel-meta">
                    <span class="badge badge-warning">ğŸ”¥ çƒ­é—¨</span>
                    <span>âœï¸ {{ novel.author_name }}</span>
                </div>
                <div class="novel-meta">
                    <span>ğŸ“– {{ novel.chapters|length }} ç« </span>
                    <span>ğŸ‘ï¸ {{ novel.readCount }}</span>
                    {% if novel.price > 0 %}
                    <span style="color: #c8553d; font-weight: bold;">Â¥{{ '%.2f'|format(novel.price) }}</span>
                    {% else %}
                    <span class="badge badge-success">å…è´¹</span>
                    {% endif %}
                </div>
                <div class="novel-intro">{{ novel.intro }}</div>
                <button class="btn btn-primary" style="width: 100%;">æŸ¥çœ‹è¯¦æƒ…</button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- æ–°ä¹¦æ¨è -->
<div style="margin-top: 3rem;">
    <h2 style="font-size: 1.5rem; font-weight: 600; color: #5a4a3a; margin-bottom: 0.5rem; padding-left: 1rem; border-left: 4px solid #5f9e6e;">
        âœ¨ æ–°ä¹¦æ¨è
    </h2>
    <p style="color: #8b7355; font-size: 0.95rem; margin-bottom: 1.5rem; padding-left: 1rem;">
        âœ¨ æœ€æ–°ä¸Šæ¶çš„å°è¯´ï¼ŒæŠ¢å…ˆé˜…è¯»
    </p>
    
    <div class="novels-grid">
        {% for novel in new_recommendations %}
        <div class="novel-card" onclick="window.location.href='{{ url_for('reader_novel_detail', novel_id=novel._id) }}'">
            <div class="novel-cover" style="background: linear-gradient(135deg, 
                {% if loop.index0 % 6 == 0 %}#5f9e6e 0%, #4a7c58 100%
                {% elif loop.index0 % 6 == 1 %}#7a92a3 0%, #5d7386 100%
                {% elif loop.index0 % 6 == 2 %}#c8553d 0%, #a0442f 100%
                {% elif loop.index0 % 6 == 3 %}#d4a259 0%, #b8894a 100%
                {% elif loop.index0 % 6 == 4 %}#8b7355 0%, #6d5c47 100%
                {% else %}#9b6b6f 0%, #7d5659 100%{% endif %});">
                {{ novel.title[:2] }}
            </div>
            <div class="novel-info">
                <div class="novel-title">{{ novel.title }}</div>
                <div class="novel-meta">
                    <span class="badge badge-success">âœ¨ æ–°ä¹¦</span>
                    <span>âœï¸ {{ novel.author_name }}</span>
                </div>
                <div class="novel-meta">
                    <span>ğŸ“– {{ novel.chapters|length }} ç« </span>
                    <span>ğŸ‘ï¸ {{ novel.readCount }}</span>
                    {% if novel.price > 0 %}
                    <span style="color: #c8553d; font-weight: bold;">Â¥{{ '%.2f'|format(novel.price) }}</span>
                    {% else %}
                    <span class="badge badge-success">å…è´¹</span>
                    {% endif %}
                </div>
                <div class="novel-intro">{{ novel.intro }}</div>
                <button class="btn btn-primary" style="width: 100%;">æŸ¥çœ‹è¯¦æƒ…</button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

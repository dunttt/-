{% extends "base-ancient.html" %}

{% block title %}åˆ›ä½œè€…æ§åˆ¶å° - æ‚¦è¯»åŠ{% endblock %}

{% block content %}
<h1 class="page-title" style="text-align: left;">åˆ›ä½œè€…æ§åˆ¶å°</h1>

<!-- ç»Ÿè®¡å¡ç‰‡ -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-label">ğŸ“š æˆ‘çš„ä½œå“</div>
        <div class="stat-value">{{ total_novels }}</div>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #5f9e6e 0%, #4a7c58 100%);">
        <div class="stat-label">âœ… å·²ä¸Šçº¿</div>
        <div class="stat-value">{{ online_novels }}</div>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #d4a259 0%, #b8894a 100%);">
        <div class="stat-label">ğŸ‘ï¸ æ€»é˜…è¯»é‡</div>
        <div class="stat-value">{{ total_reads }}</div>
    </div>
</div>

<!-- å¿«é€Ÿæ“ä½œ -->
<div class="card" style="margin-bottom: 2rem;">
    <div class="card-header">âš¡ å¿«é€Ÿæ“ä½œ</div>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{{ url_for('creator_create_novel') }}" class="btn btn-primary">
            âœï¸ åˆ›å»ºæ–°å°è¯´
        </a>
        <a href="{{ url_for('creator_novels') }}" class="btn btn-success">
            ğŸ“– æŸ¥çœ‹æ‰€æœ‰å°è¯´
        </a>
    </div>
</div>

<!-- æˆ‘çš„å°è¯´åˆ—è¡¨ -->
<div class="card">
    <div class="card-header">ğŸ“š æˆ‘çš„å°è¯´</div>
    {% if novels %}
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #faf8f3; border-bottom: 2px solid #f0e6d6;">
                    <th style="padding: 1rem; text-align: left; color: #5a4a3a; font-weight: 600;">æ ‡é¢˜</th>
                    <th style="padding: 1rem; text-align: center; color: #5a4a3a; font-weight: 600;">åˆ†ç±»</th>
                    <th style="padding: 1rem; text-align: center; color: #5a4a3a; font-weight: 600;">çŠ¶æ€</th>
                    <th style="padding: 1rem; text-align: center; color: #5a4a3a; font-weight: 600;">ç« èŠ‚æ•°</th>
                    <th style="padding: 1rem; text-align: center; color: #5a4a3a; font-weight: 600;">é˜…è¯»é‡</th>
                    <th style="padding: 1rem; text-align: center; color: #5a4a3a; font-weight: 600;">é”€é‡</th>
                    <th style="padding: 1rem; text-align: center; color: #5a4a3a; font-weight: 600;">æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for novel in novels %}
                <tr style="border-bottom: 1px solid #f0e6d6; transition: all 0.3s;"
                    onmouseover="this.style.background='#faf8f3'"
                    onmouseout="this.style.background='transparent'">
                    <td style="padding: 1rem; color: #333; font-weight: 500;">{{ novel.title }}</td>
                    <td style="padding: 1rem; text-align: center;">
                        <span class="badge badge-primary">{{ novel.category }}</span>
                    </td>
                    <td style="padding: 1rem; text-align: center;">
                        {% if novel.status == 'draft' %}
                        <span class="badge badge-secondary">ğŸ“ è‰ç¨¿</span>
                        {% elif novel.status == 'pending' %}
                        <span class="badge badge-warning">â³ å¾…å®¡æ ¸</span>
                        {% elif novel.status == 'online' %}
                        <span class="badge badge-success">âœ… å·²ä¸Šçº¿</span>
                        {% elif novel.status == 'rejected' %}
                        <span class="badge badge-danger">âŒ å·²é©³å›</span>
                        {% endif %}
                    </td>
                    <td style="padding: 1rem; text-align: center; color: #666;">{{ novel.chapters|length }}</td>
                    <td style="padding: 1rem; text-align: center; color: #666;">{{ novel.readCount }}</td>
                    <td style="padding: 1rem; text-align: center; color: #666;">{{ novel.saleCount }}</td>
                    <td style="padding: 1rem; text-align: center;">
                        <div style="display: flex; gap: 0.5rem; justify-content: center;">
                            <a href="{{ url_for('creator_edit_novel', novel_id=novel._id) }}" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">ç¼–è¾‘</a>
                            <a href="{{ url_for('creator_chapters', novel_id=novel._id) }}" class="btn btn-success" style="padding: 0.5rem 1rem; font-size: 0.9rem;">ç« èŠ‚</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <div class="icon">ğŸ“</div>
        <h3>è¿˜æ²¡æœ‰åˆ›å»ºå°è¯´</h3>
        <p>å¼€å§‹ä½ çš„åˆ›ä½œä¹‹æ—…å§ï¼</p>
        <a href="{{ url_for('creator_create_novel') }}" class="btn btn-primary">ç«‹å³åˆ›å»º</a>
    </div>
    {% endif %}
</div>
{% endblock %}
